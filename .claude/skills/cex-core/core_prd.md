---
name: CEX Core PRD
description: CEX 서비스 전반에 적용되는 최상위 판단 헌법 (v1.2)
---

# CEX Core PRD v1.2 (Skills용)

## 1. 문서의 역할과 사용 규칙

### 1.1 문서 목적
본 문서는 CEX 서비스 전반에 적용되는 최상위 기준(Core PRD)이며,  
Claude Code 환경에서 **Skills로 항상 로드되는 판단 헌법 문서**로 사용한다.

본 문서는 기능 정의서가 아니라  
**모든 모듈이 어떤 기준으로 판단해야 하는지를 규정하는 문서**다.

---

### 1.2 적용 범위
- 온보딩 (Account Creation, KYC)
- 거래 (Spot, Derivatives, 확장 상품)
- 지갑 (Wallet, Balance, Withdrawal)
- 마이페이지 / 계정 관리
- 운영, 제한, 락 상태 처리
- 파일럿 기반 단계적 서비스 운영
- 규제 친화적 서비스 운영 전제

---

### 1.3 사용 원칙
- 본 문서는 모든 모듈 PRD보다 우선한다.
- 모듈 PRD는 본 문서를 확장할 수 있으나 위배할 수 없다.
- 본 문서에 정의되지 않은 세부 사항은 정책 레이어 또는 모듈 PRD에서 정의한다.
- AI는 본 문서를 **항상 전제 조건**으로 적용한다.

---

## 2. 서비스 정체성 정의 (CEX Identity)

### 2.1 서비스 유형
- 본 서비스는 Centralized Exchange(CEX)이다.
- 탈중앙화 거래소(DEX)의 철학·구조·용어를 혼합하지 않는다.

---

### 2.2 핵심 특성
- 중앙 Account 기반 서비스
- 내부 원장(Internal Ledger)이 자산의 유일한 진실 원천이다.
- 사용자는 자산을 직접 소유하지 않는다.
- 모든 기능 접근은 상태(State), 정책(Policy), 리스크(Risk)에 의해 결정된다.

---

### 2.3 규제 친화 서비스 원칙 (Regulation-friendly CEX)
본 CEX는 규제 회피 또는 회색 지대를 전제로 하지 않는다.

- 정책(Policy)은 규제 요구사항을 흡수하기 위한 1차 수단이다.
- 규제 불확실성 상황에서는 기능 축소 또는 제한을 기본값으로 한다.
- 실험적 기능보다 **운영 적합성, 감사 가능성, 추적 가능성**을 우선한다.

---

## 3. 단계적 서비스 운영 원칙 (Pilot → Contract → Expansion)

### 3.1 단계적 운영 전제
본 CEX는 단일 완성형 서비스가 아니라  
**파일럿 → 계약 → 확장 단계로 성장하는 구조**를 전제로 한다.

---

### 3.2 기능 노출과 사용의 분리
- 기능은 UI에 노출될 수 있다.
- 기능 사용 가능 여부는 운영 단계, 정책, 상태에 따라 제한될 수 있다.
- "미구현"과 "운영 단계상 비활성"을 명확히 구분한다.

---

### 3.3 Pilot 단계의 성격 정의
Pilot 단계는 데모 또는 내부 테스트가 아니다.

- 실제 사용자 사용을 전제로 한다.
- KPI 측정 및 운영 데이터 수집을 목적으로 한다.
- Pilot 결과는 계약 체결 여부 판단의 근거로 사용된다.
- Pilot 환경에서도 Core 판단 원칙은 동일하게 적용된다.

---

## 4. 핵심 엔티티 정의 (절대 기준)

### 4.1 Account
- 모든 사용자는 Account 단위로 관리된다.
- 회원(Member), 등급(Level) 개념을 사용하지 않는다.

Account는 다음을 포함한다.
- 인증 상태
- KYC 상태
- 권한 판단 기준
- 지갑 및 자산
- 리스크 상태

---

### 4.2 User와 Account의 구분
- User: UI 상의 조작 주체
- Account: 권한·자산·거래의 유일한 판단 주체

모든 시스템 판단은 Account 기준으로 수행한다.

---

### 4.3 Wallet
- Wallet은 Account에 종속된다.
- 내부 원장 잔고가 단일 진실 원천이다.
- 블록체인 주소는 구현 수단일 뿐, 소유 개념이 아니다.

---

## 5. 상태(State) 모델 원칙

### 5.1 상태 정의
State는 Account의 **검증 완료 수준**을 의미한다.  
State는 기능을 직접 열지 않으며, **권한 판단의 입력값**이다.

---

### 5.2 상태 우선 원칙
- 기능 접근 가능 여부는 항상 State를 기준으로 판단한다.
- UI 노출 여부는 기능 가능 여부를 의미하지 않는다.

---

### 5.3 상태 레벨 구조 (예시)
- Level 0: Created
- Level 1: Credential Verified
- Level 2: KYC Basic Verified
- Level 3: KYC Advanced Verified
- Level 4: Full Access

상태 레벨은 확장 가능하나,  
**상태 기반 판단 원칙은 변경할 수 없다.**

---

## 6. 권한(Entitlement) 모델

### 6.1 권한 정의
권한은 Account가 수행할 수 있는 행위의 결과값이다.

권한은 다음 요소의 조합으로 계산된다.
- 상태(State)
- 정책(Policy)
- 리스크(Risk)

---

### 6.2 권한 판단 순서 (고정)
1. 상태 확인
2. 정책 적용
3. 리스크 평가
4. 최종 허용 또는 제한

이 순서는 모든 모듈에서 동일하게 적용한다.

---

## 7. 정책(Policy) 레이어 원칙

### 7.1 정책의 역할
정책은 국가, 프로젝트, 운영 조건의 차이를 흡수하기 위한 레이어다.

---

### 7.2 정책 적용 원칙
- 정책은 명시적이다.
- 수치 또는 규칙으로 정의된다.
- 해석이나 추론의 대상이 아니다.

---

### 7.3 AI 판단 제한
- AI는 정책을 해석하거나 보완하지 않는다.
- 정책이 불명확한 경우 차단 또는 보류를 기본값으로 한다.

---

## 8. 리스크(Risk) 처리 원칙

### 8.1 리스크 정의
리스크는 상태와 별도로 적용되는 제한 요인이다.

---

### 8.2 리스크 우선성
- 정상 상태라도 리스크가 있으면 기능은 제한된다.
- 리스크는 자동 해제되지 않는다.

---

### 8.3 리스크 발생 시 기본 동작
- 기능 제한
- 제한 사유 안내
- 추가 인증 또는 운영 개입 요구

---

## 9. 환경 불안정성 전제 원칙

### 9.1 환경 전제
본 서비스는 네트워크 및 디바이스 환경이  
항상 안정적이지 않음을 전제로 한다.

---

### 9.2 실패 처리 원칙
- 요청 실패는 예외가 아니라 정상 케이스로 간주한다.
- 실패는 즉시 사용자에게 인지 가능해야 한다.
- 재시도, 보류, 대기 상태를 UX와 상태 모델에서 허용한다.

---

## 10. 실자산·시뮬레이션 자산 공통 판단 원칙

- 자산이 실자산이든 시뮬레이션 자산이든  
  Account, State, Policy, Risk 판단 구조는 동일하다.
- 실자산 여부는 정책 또는 운영 단계의 속성이지,  
  Core 판단 구조를 변경하지 않는다.

---

## 11. Account와 운영 권한 분리 원칙

### 11.1 Operation Actor 정의
- Admin, Manager 등 운영자는 Account와 분리된  
  **운영 주체(Operation Actor)**다.

---

### 11.2 분리 원칙
- 운영 권한은 Account 상태 판단에 직접 개입하지 않는다.
- 운영 개입은 별도의 정책·운영 레이어를 통해 수행한다.

---

### 11.3 Pilot 단계 운영 개입 원칙
Pilot 단계에서는 운영자 개입 빈도가 높을 수 있다.

- 이는 Pilot의 성격에 따른 합법적 운영 행위로 간주한다.
- 모든 운영 개입은 기록 가능하고 감사 가능해야 한다.
- 운영 개입이 Account 판단 로직을 대체해서는 안 된다.

---

## 12. UX 공통 판단 원칙

### 12.1 기본 철학
- 정보는 숨기지 않는다.
- 행위는 제한할 수 있다.

---

### 12.2 제한 상태 UX
- 단순 비활성화는 허용하지 않는다.
- 제한 사유를 명확히 안내한다.
- 제한 원인이 상태, 정책, 리스크 중 무엇인지 구분한다.

---

## 13. AI 생성 시 금지 사항

AI는 다음을 수행해서는 안 된다.
- 규제·법적 요건을 임의로 해석
- 상태·권한 구조를 회원 등급 개념으로 축소
- DEX 개념 혼입
- 사용자가 자산을 직접 소유하는 것처럼 표현
- 운영자 권한을 Account 판단 로직에 직접 포함

---

## 14. 확장 원칙

### 14.1 모듈 확장 기준
모든 신규 모듈은 반드시 다음 관점을 포함한다.
- Account
- State
- Policy
- Risk

---

### 14.2 장기 확장 방향
- 파생상품
- STO
- 기관 계정(B2B)

확장은 Core 구조를 유지한 채  
상태와 정책 확장으로 대응한다.

---

## 15. 최종 기준 요약
- 모든 판단 단위는 Account다.
- 모든 기능은 State → Policy → Risk 순으로 결정된다.
- 기능 노출과 사용 가능 여부는 분리한다.
- Pilot은 실운영 단계다.
- 규제 친화와 감사 가능성을 우선한다.
- AI는 규칙을 만들지 않고 규칙을 적용한다.

본 문서는 모든 PRD의 최상위 기준이다.
