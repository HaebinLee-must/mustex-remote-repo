---
name: CEX Core PRD
description: CEX 서비스 전반에 적용되는 최상위 사고 규칙(Decision Rules)
---

# CEX Core PRD (Skills용)

## 1. 문서의 역할과 사용 규칙

### 1.1 문서 목적
본 문서는 CEX 서비스 전반에 적용되는 최상위 기준(Core PRD)이며,  
Claude Code 환경에서 Skills로 항상 로드되는 **사고 규칙(Decision Rules)** 문서로 사용한다.

본 문서는 "무엇을 만들 것인가"가 아니라  
**"어떤 기준으로 판단할 것인가"**를 정의한다.

### 1.2 적용 범위
- 온보딩
- KYC / AML
- 거래 (Spot, Derivatives)
- 지갑 (Wallet)
- 마이페이지 / 계정 관리
- 운영, 제한, 락 상태 처리

### 1.3 사용 원칙
- 본 문서는 모든 모듈 PRD보다 우선한다.
- 모듈 PRD는 본 문서를 확장할 수 있으나 위배할 수 없다.
- 본 문서에 없는 내용은 정책 레이어 또는 모듈 PRD에서 정의한다.
- AI는 본 문서를 **항상 전제 조건**으로 적용한다.

---

## 2. 서비스 정체성 정의 (CEX Identity)

### 2.1 서비스 유형
- 본 서비스는 Centralized Exchange(CEX)이다.
- DEX의 구조, 용어, 철학을 혼합하지 않는다.

### 2.2 핵심 특성
- 중앙 Account 기반 서비스
- 내부 원장(Internal Ledger)이 자산의 진실 원천이다.
- 사용자는 자산을 "직접 소유"하지 않고, Account를 통해 접근한다.
- 모든 기능 접근은 **상태·정책·리스크 판단 결과**로 결정된다.

---

## 3. 핵심 엔티티 정의 (절대 기준)

### 3.1 Account
- 모든 사용자는 Account 단위로 관리된다.
- 회원(Member), 유저 등급 개념을 사용하지 않는다.

Account는 다음을 포함한다.
- 인증 상태
- KYC 상태
- 권한 판단 대상
- 지갑 및 잔고
- 리스크 상태

### 3.2 User와 Account의 구분
- User: UI 상의 조작 주체
- Account: 권한·자산·거래의 유일한 판단 주체

모든 시스템 판단은 Account 기준으로 수행한다.

### 3.3 Wallet
- Wallet은 Account에 종속된다.
- 내부 원장 기준 잔고가 단일 진실 원천이다.
- 블록체인 주소는 구현 수단일 뿐, 소유 개념이 아니다.

---

## 4. 상태(State) 모델 원칙

### 4.1 상태의 정의
State는 Account의 **검증 완료 수준**을 의미한다.  
State는 기능 자체를 열지 않으며, **권한 판단의 입력값**이다.

### 4.2 상태 우선 원칙
- 기능 가능 여부는 항상 State를 기준으로 판단한다.
- UI 노출 여부는 기능 가능 여부를 의미하지 않는다.

### 4.3 Account 상태 레벨 구조 (예시)
- Level 0: Created
- Level 1: Email / Phone Verified
- Level 2: KYC Basic Verified
- Level 3: KYC Advanced Verified
- Level 4: Full Access

상태 레벨 구조는 확장 가능하나,  
**상태 기반 권한 판단 원칙은 변경할 수 없다.**

---

## 5. 권한(Entitlement) 모델

### 5.1 권한의 정의
권한은 Account가 **어떤 행위를 수행할 수 있는지에 대한 결과값**이다.

권한은 다음 요소로 계산된다.
- 상태(State)
- 정책(Policy)
- 리스크(Risk)

### 5.2 권한 판단 순서 (고정 규칙)
1. 상태 확인
2. 정책 적용
3. 리스크 평가
4. 최종 허용 또는 제한 결정

이 순서는 모든 모듈에서 동일하게 적용한다.

---

## 6. 정책(Policy) 레이어 원칙

### 6.1 정책의 역할
정책은 국가, 프로젝트, 운영 조건의 차이를 흡수하기 위한 레이어다.  
기능 로직에 직접 포함하지 않는다.

### 6.2 정책의 성격
- 명시적이다.
- 수치 또는 규칙으로 정의된다.
- 추론이나 해석의 대상이 아니다.

### 6.3 AI 판단 제한 규칙
- AI는 정책을 해석하거나 보완하지 않는다.
- 정책이 불명확한 경우 **차단 또는 보류**를 기본값으로 한다.

---

## 7. 리스크(Risk) 처리 원칙

### 7.1 리스크의 정의
리스크는 상태와 무관하게 Account에 적용되는 **제한 요인**이다.

### 7.2 리스크 우선 적용 규칙
- 정상 상태라도 리스크가 있으면 기능은 제한된다.
- 리스크는 자동으로 해제되지 않는다.

### 7.3 리스크 발생 시 기본 동작
- 기능 제한
- 제한 사유 안내
- 추가 인증 또는 운영 개입 요구

---

## 8. UX 공통 판단 원칙

### 8.1 UX 기본 철학
- 정보는 숨기지 않는다.
- 행위는 제한할 수 있다.

### 8.2 제한 상태 UX 규칙
- 제한 사유를 반드시 명시한다.
- 제한 원인이 상태, 정책, 리스크 중 무엇인지 구분한다.
- 단순 비활성화는 허용하지 않는다.

---

## 9. AI 생성 시 금지 규칙 (중요)

AI는 다음을 수행해서는 안 된다.
- 규제·법적 요건을 임의로 해석
- Account 개념을 회원 등급으로 단순화
- DEX 개념 혼입
- 사용자가 자산을 직접 소유하는 것처럼 표현
- 상태 없이 기능을 직접 열어버리는 구조 생성

---

## 10. 모듈 확장 원칙

### 10.1 모듈 정의 기준
모든 모듈 PRD는 반드시 다음 관점을 포함한다.
- Account 기준
- State 입력
- Policy 적용
- Risk 영향

### 10.2 장기 확장
- 파생상품
- STO
- 기관 계정(B2B)

위 확장은 Core 구조를 유지한 채 상태·정책 확장으로 대응한다.

---

## 11. 최종 기준 요약
- 모든 판단 단위는 Account이다.
- 모든 기능은 State → Policy → Risk 순으로 결정된다.
- UI 노출과 기능 가능은 분리한다.
- AI는 규칙을 만들지 않고 규칙을 적용한다.
- 본 문서는 모든 모듈 PRD의 헌법이다.
