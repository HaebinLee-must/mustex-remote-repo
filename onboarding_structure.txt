# CEX Onboarding Structure PRD (Skills용)

## 1. 문서 역할
본 문서는 CEX Core PRD를 전제로 한 **온보딩 모듈의 구조적 기준**을 정의한다.  
본 문서는 화면 구현이나 API 상세가 아닌, **판단 흐름과 상태 전이 규칙**을 고정한다.

---

## 2. 온보딩의 정의와 범위

### 2.1 온보딩 정의
온보딩은 Account가 생성된 이후,  
**기능 사용을 위한 최소·필수 검증 상태를 단계적으로 획득하는 과정**이다.

온보딩은 회원가입이 아니다.  
온보딩의 목적은 **상태(State) 상승**이다.

---

### 2.2 온보딩 포함 범위
- 계정 생성
- 인증 수단 검증
- KYC 검증
- 약관 및 동의 처리
- 상태 전이 결과 안내

---

### 2.3 온보딩 제외 범위
- 거래 로직
- 지갑 자산 관리
- 출금/입금 실행
- 마이페이지 기능

---

## 3. 온보딩 판단의 기본 원칙

### 3.1 Account 기준 원칙
- 모든 온보딩 판단은 Account 기준으로 수행한다.
- User(UI)는 판단 주체가 아니다.

---

### 3.2 상태 중심 원칙
- 온보딩 단계는 UI 흐름이 아니라 **상태(State) 전이 흐름**이다.
- 각 단계의 완료는 반드시 **상태 변화**를 동반해야 한다.

---

### 3.3 순차성 원칙
- 온보딩 단계는 **순차적으로만 진행**된다.
- 중간 단계 생략은 허용하지 않는다.
- 정책에 의해 추가 단계가 삽입될 수 있다.

---

## 4. 온보딩 상태 전이 구조 (기본)

### 4.1 기본 상태 흐름 (예시)
- Level 0: Account Created
- Level 1: Credential Verified
- Level 2: KYC Basic Verified
- Level 3: KYC Advanced Verified
- Level 4: Onboarding Completed

상태 레벨 명칭과 수는 정책에 따라 확장 가능하나,  
**단계적 전이 구조는 변경할 수 없다.**

---

### 4.2 상태 전이 규칙
- 상태는 후퇴하지 않는다.
- 실패는 상태 미전이로 처리한다.
- 재시도는 허용하되, 상태 변경은 성공 시에만 발생한다.

---

## 5. 온보딩 단계별 구조 규칙

### 5.1 Account Creation
- Account는 최소 정보로 생성될 수 있다.
- 생성 시 기본 상태는 Level 0이다.
- 생성만으로 기능은 해제되지 않는다.

---

### 5.2 Credential Verification
- 이메일 또는 휴대폰 등 인증 수단 검증 단계
- 본 단계 완료 시 Level 1로 전이 가능
- 인증 수단 유형은 정책 레이어에서 결정한다.

---

### 5.3 KYC Verification
- KYC는 단일 단계가 아니라 **레벨 구조**를 가진다.
- KYC 단계는 정책에 따라 분기될 수 있다.

예:
- Basic KYC
- Advanced KYC
- 추가 서류 또는 실시간 인증

상태 전이는 검증 성공 시에만 발생한다.

---

### 5.4 Agreement & Consent
- 약관 동의는 온보딩의 필수 조건이다.
- 약관 동의는 상태 전이의 **보조 조건**이며, 단독 전이 요건이 아니다.
- 동의 누락 시 상태 전이는 차단된다.

---

## 6. 정책(Policy) 개입 지점

### 6.1 정책 개입 가능 지점
정책은 다음 지점에서 온보딩 흐름에 개입할 수 있다.
- 요구 KYC 레벨 결정
- 추가 검증 단계 삽입
- 특정 국가/계정 유형 차단

---

### 6.2 정책 적용 원칙
- 정책은 명시적이어야 한다.
- 정책은 온보딩 로직을 대체하지 않는다.
- 정책은 상태 전이를 **제어**할 뿐, 직접 상태를 변경하지 않는다.

---

## 7. 리스크(Risk) 개입 규칙

### 7.1 리스크 개입 위치
- 온보딩 도중에도 리스크는 발생할 수 있다.
- 리스크 발생 시 상태 전이는 중단된다.

---

### 7.2 리스크 발생 시 처리
- 온보딩 일시 중단
- 제한 사유 명시
- 추가 인증 또는 운영 개입 요구

리스크는 자동으로 해제되지 않는다.

---

## 8. UX 공통 규칙 (온보딩)

### 8.1 진행 상태 가시성
- 사용자는 현재 단계와 다음 단계를 인지할 수 있어야 한다.
- 상태와 UI 단계는 1:1로 매핑되지 않아도 된다.

---

### 8.2 실패 처리 UX
- 실패 시 재시도 가능 여부를 명확히 안내한다.
- 실패는 오류가 아니라 **상태 미완료**로 표현한다.

---

## 9. AI 생성 시 금지 사항 (온보딩)

AI는 다음을 수행해서는 안 된다.
- 온보딩을 단순 회원가입 플로우로 축소
- 상태 전이 없는 UI 단계 생성
- 정책 판단을 AI가 대신 수행
- KYC 단계를 임의로 통합 또는 생략

---

## 10. 온보딩 완료의 정의

### 10.1 온보딩 완료 조건
- 정책이 요구하는 모든 상태를 충족
- 리스크가 없는 상태
- 약관 동의 완료

---

### 10.2 완료 이후
- 기능 접근 여부는 Trade / Wallet 모듈에서 판단한다.
- 온보딩 완료는 기능 개방을 보장하지 않는다.

---

## 11. 요약 기준
- 온보딩은 상태 전이 과정이다.
- 모든 판단 단위는 Account이다.
- 정책과 리스크는 흐름을 제어하지만 상태를 직접 변경하지 않는다.
- 본 문서는 온보딩 모듈의 구조적 기준이다.