---
name: Onboarding Structure
description: 온보딩 모듈의 구조와 책임 경계 정의 (판단 규칙)
---

# Onboarding Structure

> **역할:** 이 문서는 기능 설명이 아니라 **판단 규칙**입니다.  
> 화면이 아니라 **구조와 책임 경계**를 정의합니다.

---

## 1. 모듈 책임 정의

온보딩 모듈은 다음을 책임진다:
- Account 생성
- Credential 인증 (이메일/전화번호)
- KYC 프로세스 진행
- State 0 → State 3까지의 전환

온보딩 모듈은 다음을 책임지지 않는다:
- 거래 기능 제공
- 자산 관리
- State 판단 로직 (Core에서 수행)

---

## 2. 상태 전환 구조

### 2.1 전환 경로
```
State 0 (Created)
  ↓ Credential Verification
State 1 (Credential Verified)
  ↓ KYC Basic
State 2 (KYC Basic Verified)
  ↓ KYC Advanced
State 3 (KYC Advanced Verified)
```

### 2.2 전환 조건
- 각 전환은 검증 완료를 의미
- 전환은 되돌릴 수 없음 (단, 리스크 발생 시 제한 가능)
- 전환 실패 시 현재 State 유지

---

## 3. 책임 경계

### 3.1 온보딩 모듈의 책임
- 사용자 입력 수집
- 입력 검증 (형식, 필수값)
- KYC 제출
- 진행 상황 표시

### 3.2 Core/Policy의 책임
- State 전환 판단
- 국가별 KYC 요구사항 적용
- 리스크 평가
- 최종 승인/거부 결정

---

## 4. 플로우 구조 원칙

### 4.1 단일 목적 플로우
- 온보딩은 KYC 완료까지의 단일 목적 플로우
- 중간에 다른 기능으로 분기하지 않음
- 완료 후 메인 서비스로 이동

### 4.2 진행 인지
- 현재 단계를 명확히 표시
- 다음 행동을 명시
- 제한 사유를 구분하여 안내 (State/Policy/Risk)

### 4.3 실패 처리
- 실패는 정상 케이스
- 재시도 옵션 제공
- 보류 상태 명시적 표현

---

## 5. 데이터 구조 원칙

### 5.1 입력 데이터
- 개인정보 (이름, 생년월일, 주소)
- 신분증 이미지
- 셀피 이미지
- 추가 서류 (State에 따라)

### 5.2 출력 데이터
- Account State 변경 요청
- KYC 제출 기록
- 검증 결과 (승인/거부/보류)

---

## 6. UI 구조 원칙

### 6.1 레이아웃
- 중앙 정렬 단일 컬럼
- 모바일 우선 설계
- 진행 표시기 (Stepper)는 인지용 (State와 1:1 아님)

### 6.2 인터랙션
- Primary 버튼은 화면당 1개
- Disabled 상태는 숨기지 않고 사유 안내
- 입력 실패 시 즉시 피드백

---

## 7. 정책 적용 지점

### 7.1 국가별 차이
- KYC 요구 수준 (Basic/Advanced)
- 필수 서류 종류
- 인증 방식 (셀피/비디오)

### 7.2 Pilot 단계 제약
- KYC Advanced 미지원 가능
- 일부 국가 제한 가능
- 운영자 수동 검토 빈도 높음

---

## 8. 리스크 처리

### 8.1 리스크 발생 시나리오
- 의심스러운 계정 생성 패턴
- 동일 디바이스/IP 다수 계정
- 신분증 위조 의심

### 8.2 처리 원칙
- 즉시 프로세스 중단
- 운영팀 개입 요구
- 자동 해제 불가

---

## 9. AI 생성 시 준수 사항

온보딩 모듈 생성 시 AI는:
- State 전환 로직을 직접 구현하지 않음 (API 호출)
- 정책을 하드코딩하지 않음
- 리스크 판단을 자동화하지 않음
- 사용자에게 "회원 등급" 개념으로 설명하지 않음
