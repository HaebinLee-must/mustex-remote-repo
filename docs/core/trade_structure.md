---
name: Trade Structure
description: 거래 모듈의 구조와 책임 경계 정의 (판단 규칙)
---

# Trade Structure

> **역할:** 이 문서는 기능 설명이 아니라 **판단 규칙**입니다.  
> 화면이 아니라 **구조와 책임 경계**를 정의합니다.

---

## 1. 모듈 책임 정의

거래 모듈은 다음을 책임진다:
- 주문 입력 및 제출
- 시장 정보 표시 (호가, 차트, 체결)
- 오픈 오더 관리
- 거래 내역 조회

거래 모듈은 다음을 책임지지 않는다:
- 거래 가능 여부 판단 (Core에서 수행)
- 자산 잔고 관리 (Wallet 모듈)
- 정책 적용 (Policy Layer)

---

## 2. 거래 타입 구조

### 2.1 Spot Trading
- 현물 즉시 거래
- 1:1 자산 교환
- 레버리지 없음

### 2.2 Derivatives Trading
- 선물, 옵션
- 레버리지 적용
- 청산 메커니즘 포함

---

## 3. 책임 경계

### 3.1 거래 모듈의 책임
- 주문 파라미터 입력 (가격, 수량, 타입)
- 입력 검증 (형식, 범위)
- 주문 제출
- 체결 결과 표시

### 3.2 Core/Policy의 책임
- 거래 가능 여부 판단 (State/Policy/Risk)
- 거래 한도 적용
- 레버리지 배율 제한
- 최종 체결 승인

---

## 4. 정보 구조 원칙

### 4.1 고밀도 정보 환경
- 거래는 빠른 판단을 요구
- 정보는 계층적으로 구성
- 중요 정보는 항상 가시적

### 4.2 실시간성
- 호가, 차트, 체결은 실시간 업데이트
- 네트워크 불안정 시 명시적 표시
- 지연 발생 시 사용자 인지 가능

---

## 5. UI 구조 원칙

### 5.1 레이아웃
- 좌: 마켓 리스트
- 중: 차트
- 우: 오더북
- 하: 주문 패널, 체결 내역, 오픈 오더

### 5.2 정보 표현
- 숫자는 우측 정렬
- 상승/하락 시맨틱 컬러
- 중요 액션은 명확한 시각적 구분

---

## 6. 주문 구조

### 6.1 주문 타입
- Market Order (시장가)
- Limit Order (지정가)
- Stop-Limit Order (조건부 지정가)

### 6.2 주문 상태
- Pending (제출 중)
- Open (체결 대기)
- Filled (체결 완료)
- Cancelled (취소됨)
- Rejected (거부됨)

---

## 7. 정책 적용 지점

### 7.1 거래 제한
- 국가별 거래 가능 자산
- 일일/월간 거래 한도
- 레버리지 배율 제한

### 7.2 Pilot 단계 제약
- Spot만 지원 가능
- 일부 자산 제한
- 거래 한도 축소

---

## 8. 리스크 처리

### 8.1 리스크 발생 시나리오
- 비정상 거래 패턴 (wash trading 등)
- 급격한 가격 변동
- 시장 조작 의심

### 8.2 처리 원칙
- 즉시 거래 중단
- 오픈 오더 취소 가능
- 운영팀 개입 필요

---

## 9. 실패 처리 원칙

### 9.1 주문 실패
- 실패 사유 명확히 표시 (State/Policy/Risk 구분)
- 재시도 옵션 제공
- 잔고 즉시 복구

### 9.2 네트워크 실패
- 주문 상태 불명확 시 명시
- 재확인 메커니즘 제공
- 중복 제출 방지

---

## 10. AI 생성 시 준수 사항

거래 모듈 생성 시 AI는:
- 거래 가능 여부를 직접 판단하지 않음 (API 호출)
- 정책을 하드코딩하지 않음
- 리스크 판단을 자동화하지 않음
- 사용자 자산을 "소유"로 표현하지 않음
