# CEX Wallet Operations & Fee Details

> **Status:** Draft (v1.0)  
> **Last Updated:** 2026-01-20  
> **Related PRD:** [Wallet UI PRD](./wallet.md)

---

## 1. 개요
본 문서는 자산 입출금 시의 상세 운영 프로세스, 네트워크별 수수료 정책, 그리고 사용자 자산 보호를 위한 보안 수칙을 정의한다.

---

## 2. 입금 프로세스 상세 (Deposit)

### 2.1 자산/네트워크 선택
- **네트워크 매칭 중요성:** 자산별 지원 네트워크(예: ETH-ERC20, USDT-TRC20 등)를 명확히 표시하고, 오입금 시 복구 불가능함을 강력 경고.
- **최소 입금 금액:** 네트워크 수수료보다 적은 금액 입금 시 잔고에 반영되지 않을 수 있음을 명시.

### 2.2 주소 생성 및 표시
- **신규 주소 발급:** "주소 생성" 버튼 클릭 시 API를 통해 고유 주소 할당.
- **복사 및 스캔:** 주소 문자열 복사 버튼과 QR 코드 기능 제공.
- **컨펌 수 안내:** "입금 확인을 위해 블록체인 상의 {N} 컨펌이 필요합니다. (예상 소요 시간: {M}분)"

---

## 3. 출금 프로세스 상세 (Withdrawal)

### 3.1 출금 단계별 유효성 검사
1. **주소 검증:** 해당 네트워크의 주소 형식(Regex) 일치 여부 확인.
2. **한도 확인:** `Account State`에 따른 일일/회당 출금 한도 잔여분 확인.
3. **잔고 확인:** `Requested Amount + Fee <= Available Balance`.

### 3.2 수수료(Fee) 정책
- **네트워크 수수료:** 블록체인 전송 비용 (자산별 고정 또는 실시간 변동).
- **서비스 수수료:** (Pilot 단계) 0 또는 최소 운영비 적용.
- **UI 표시:** "최종 수령 금액 = 출금 신청 금액 - 총 수수료" 산식을 명확히 노출.

### 3.3 2FA 및 보안 인증
- **필수 인증:** 이메일 OTP + Google Authenticator(OTP).
- **출금 동결 기간:** 비밀번호 변경 또는 2FA 해제 후 24시간 동안 출금 금지 (Risk 대응).

---

## 4. 입출금 상태 정의 (Transaction Status)

| 상태 (Status) | 의미 | UX 처리 |
| :--- | :--- | :--- |
| **Pending** | 요청 접수됨 (운영자 검토 전) | [Cancel] 버튼 활성화 (검토 전에는 취소 가능) |
| **Processing** | 네트워크 전송 중 (TxID 생성됨) | TxID 클릭 시 Block Explorer로 이동 링크 제공 |
| **Completed** | 전송 완료 및 원장 반영 | 성공 알림 제공 |
| **Rejected** | 운영자 또는 시스템에 의해 거부 | 거부 사유(예: "주소 불명확", "리스크 감지") 표시 |

---

## 5. 보안 및 주의사항 (Safety)

- **Whitelist 주소:** 자주 사용하는 출금 주소를 등록하고 별칭(Alias) 부여 기능.
- **주소 오입력 방지:** 주소 붙여넣기 시 첫 4자리와 마지막 4자리 강조 표시.
- **위험 경고:** "출금 완료 후에는 자산을 되찾을 수 없습니다. 주소를 다시 한번 확인하세요."

---

## 6. Pilot 단계 특약
- **수동 승인:** 모든 출금 요청은 보안을 위해 운영자 수동 승인 후 처리됨을 명시.
- **한도 제한:** 보안 사고 방지를 위해 초기 출금 한도를 보수적으로 설정.
